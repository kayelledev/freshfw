<div class="navigation-holder">
  <!--<div>-->
    <!--Position X-->
    <!--<input type="number" class="position-x" min="0" step="1">-->
  <!--</div>-->
  <!--<div>-->
    <!--Position Y-->
    <!--<input type="number" class="position-y" min="0" step="1">-->
  <!--</div>-->
  <!--<h3>-->
    <!--Products-->
    <!--<select class="products-manager">-->
      <!--<option>All</option>-->
      <!--<% @items.each do |item| %>-->
          <!--<option data-width="<%= item.width %>" data-height="<%= item.height %>" data-category="<%= item.product_category_id || 0 %>"><%= item.name %></option>-->
      <!--<% end %>-->
    <!--</select>-->
  <!--</h3>-->
  <!--<h3>-->
    <!--Category-->
    <!--<select class="categories-manager">-->
      <!--<option>All</option>-->
      <!--<% @categories.each do |item| %>-->
          <!--<option data-id="<%= item.id %>"><%= item.name %></option>-->
      <!--<% end %>-->
    <!--</select>-->
  <!--</h3>-->
  <!--<button class="add-draggable">Add element</button>-->
</div>

<div class="rotate-angle" hidden>
  Angle
  <input type="number" class="rotation-manager" min="0" max="360" step="1">
</div>

<div class="editor-width">
  <hr>
  <!--<input type="number" class="holder-width" min="0" step="1" disabled>-->
  <div class='measure-width'><%= full_measure( @product.width ) %></div>
  <%= image_tag 'line.png', class: 'editor-line' %>
</div>

<div class="editor-height">
  <%= image_tag 'line.png' %>
    <!--<input type="number" class="holder-height" min="0" step="1" disabled>-->
    <div class='measure-height'><%= full_measure( @product.height )%></div>
</div>

<div class="editor-container" data-width="<%= @product.width %>" data-height="<%= @product.height %>" style="width: 760px; height: 600px;">
  <% @product.included_products.each do |item| %>
    <% if @product.width > item.width && @product.height > item.height %>
      <% item.posX = @product.width / 2 if item.posX > @product.width || item.posX < 0 %>
      <% item.posY = @product.height / 2 if item.posY > @product.height || item.posY < 0 %>
      <span style="position: absolute;" data-width="<%= item.width %>" data-heigh="<%= item.height %>"
            data-rotation="<%= item.rotation %>"
            data-x="<%= item.posX %>"
            data-y="<%= item.posY %>"
            data-toggle="tooltip" title="<%= item.product_category.name %>">

        <div id="<%= item.id %>" class="draggable" data-width="<%= item.width %>" data-heigh="<%= item.height %>"
             data-rotation="<%= item.rotation %>"
             data-x="<%= item.posX %>"
             data-y="<%= item.posY %>"
             style="width: <%= item.width %>px; height: <%= item.height %>px;">
          <% if image_link(item, 'image6') %>
              <%= image_tag image_link(item, 'image6'), width: '100%', height: '100%' %>
          <% end %>
        </div>
        <%= image_tag 'rotate.png', class: 'rotation-arrow', width: '20px', height: '20px', hidden: true %>
      </span>
    <% else %>
      <script>
        $('.editor-container').parent().hide()
        $('div#footer').css('position','absolute');
        alert('<%= "Size #{item.name} (#{item.height}*#{item.width}) more than room size (#{@product.height}*#{@product.width})" %>');
      </script>
    <% end %>
  <% end %>
</div>


<script>
  $( document ).ready(function() {
    if ($('div.editor-container').parent().css('display') != 'none') {
      $('div#footer').css('position','static');
    }
  });
</script>
