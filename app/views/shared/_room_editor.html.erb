<% content_for :custom_scripts do %>
  <%= javascript_include_tag "http://bxslider.com/lib/jquery.bxslider.js" %>
<% end %>


<div class="navigation-holder">
  <!--<div>-->
    <!--Position X-->
    <!--<input type="number" class="position-x" min="0" step="1">-->
  <!--</div>-->
  <!--<div>-->
    <!--Position Y-->
    <!--<input type="number" class="position-y" min="0" step="1">-->
  <!--</div>-->
  <!--<h3>-->
    <!--Products-->
    <!--<select class="products-manager">-->
      <!--<option>All</option>-->
      <!--<% @items.each do |item| %>-->
          <!--<option data-width="<%= item.width %>" data-height="<%= item.depth %>" data-category="<%= item.product_category_id || 0 %>"><%= item.name %></option>-->
      <!--<% end %>-->
    <!--</select>-->
  <!--</h3>-->
  <!--<h3>-->
    <!--Category-->
    <!--<select class="categories-manager">-->
      <!--<option>All</option>-->
      <!--<% @categories.each do |item| %>-->
          <!--<option data-id="<%= item.id %>"><%= item.name %></option>-->
      <!--<% end %>-->
    <!--</select>-->
  <!--</h3>-->
  <!--<button class="add-draggable">Add element</button>-->
</div>

<div class="rotate-angle" hidden>
  Angle
  <input type="number" class="rotation-manager" min="0" max="360" step="1">
</div>



<div class="editor-width">
  <hr>
  <!--<input type="number" class="holder-width" min="0" step="1" disabled>-->
  <div class='measure-width'>
    <span id='measure-width-ft'><%= full_measure( @product.width )[:ft] %></span>
    ft.
    <span id='measure-width-inch'><%= full_measure( @product.width )[:inch] %></span>
    in.
  </div>
  <%= image_tag 'line.png', class: 'editor-line' %>
</div>



<div class="editor-height">
  <%= image_tag 'vertical-line.png' %>
    <!--<input type="number" class="holder-height" min="0" step="1" disabled>-->
    <div class='measure-height'>
      <span id='measure-height-ft'><%= full_measure( @product.depth )[:ft] %></span>
      ft.
      <span id='measure-height-inch'><%= full_measure( @product.depth )[:inch] %></span>
      in.
    </div>
</div>


<div class='dragg'>

<div class="editor-items-panel">
  <% @product.included_products.each do |item| %>
    <div class='draggable2 items-panel-elem' data-id="<%= item.id %>">
        <% if image_link(item, 'image6') %>
              <%= image_tag image_link(item, 'image6'), width: '100%', height: '100%' %>
          <% end %>
    </div>
  <% end %>
</div>



<div class="editor-container" data-width="<%= @product.width %>" data-height="<%= @product.depth %>" style="height: 600px;">
  <% @product.included_products.each do |item| %>
    <% if @product.width > item.width && @product.depth > item.depth %>
      <% item.posX = @product.width / 2 if item.posX > @product.width || item.posX < 0 %>
      <% item.posY = @product.depth / 2 if item.posY > @product.depth || item.posY < 0 %>
      <span style="position: absolute;" data-width="<%= item.width %>" data-height="<%= item.depth %>"
            data-rotation="<%= item.rotation %>"
            data-x="<%= item.posX %>"
            data-y="<%= item.posY %>"
            data-toggle="tooltip" title="<%= item.product_category.name %>">

        <div id="<%= item.id %>" class="draggable" data-width="<%= item.width %>" data-height="<%= item.depth %>"
             data-rotation="<%= item.rotation %>"
             data-x="<%= item.posX %>"
             data-y="<%= item.posY %>"
             >
          <% if image_link(item, 'image6') %>
              <%= image_tag image_link(item, 'image6'), width: '100%', height: '100%', class: 'item-image'%>
          <% end %>
        </div>
        <%= image_tag 'rotate.png', class: 'rotation-arrow', width: '20px', height: '20px', hidden: true %>
      </span>
    <% else %>
      <script>
        $('.room-editor-container').hide();
        alert('<%= "Room dimensions (#{@product.width} x #{@product.depth}) are not enough for #{item.name} (#{item.width} x #{item.depth})" %>');
      </script>
    <% end %>
  <% end %>
</div>

</div>

<div id="dimensions-dialog" title="Set dimensions">
  <div id='room-slider'>
    <div class="slide" data-room-id='0' data-room-type='rect'><%= image_tag 'rooms/room_rect_0.png', class: 'active-slider' %></div>
    <div class="slide" data-room-id='1' data-room-type='l'><%= image_tag 'rooms/room_l_0.png' %></div>
    <div class="slide" data-room-id='2' data-room-type='l'><%= image_tag 'rooms/room_l_1.png' %></div>
    <div class="slide" data-room-id='3' data-room-type='l'><%= image_tag 'rooms/room_l_2.png' %></div>
    <div class="slide" data-room-id='4' data-room-type='l'><%= image_tag 'rooms/room_l_3.png' %></div>
    <div class="slide" data-room-id='5' data-room-type='t'><%= image_tag 'rooms/room_t_0.png' %></div>
    <div class="slide" data-room-id='6' data-room-type='t'><%= image_tag 'rooms/room_t_1.png' %></div>
    <div class="slide" data-room-id='7' data-room-type='t'><%= image_tag 'rooms/room_t_2.png' %></div>
    <div class="slide" data-room-id='8' data-room-type='t'><%= image_tag 'rooms/room_t_3.png' %></div>
    <div class="slide" data-room-id='9' data-room-type='c'><%= image_tag 'rooms/room_c_0.png' %></div>
    <div class="slide" data-room-id='10' data-room-type='c'><%= image_tag 'rooms/room_c_1.png' %></div>
    <div class="slide" data-room-id='11' data-room-type='c'><%= image_tag 'rooms/room_c_2.png' %></div>
    <div class="slide" data-room-id='12' data-room-type='c'><%= image_tag 'rooms/room_c_3.png' %></div>
    <div class="slide" data-room-id='13' data-room-type='e'><%= image_tag 'rooms/room_e_0.png' %></div>
    <div class="slide" data-room-id='14' data-room-type='e'><%= image_tag 'rooms/room_e_1.png' %></div>
    <div class="slide" data-room-id='15' data-room-type='e'><%= image_tag 'rooms/room_e_2.png' %></div>
    <div class="slide" data-room-id='16' data-room-type='e'><%= image_tag 'rooms/room_e_3.png' %></div>
    <div class="slide" data-room-id='17' data-room-type='f'><%= image_tag 'rooms/room_f_0.png' %></div>
    <div class="slide" data-room-id='18' data-room-type='f'><%= image_tag 'rooms/room_f_1.png' %></div>
    <div class="slide" data-room-id='19' data-room-type='f'><%= image_tag 'rooms/room_f_2.png' %></div>
    <div class="slide" data-room-id='20' data-room-type='f'><%= image_tag 'rooms/room_f_3.png' %></div>
    <div class="slide" data-room-id='21' data-room-type='fl'><%= image_tag 'rooms/room_fl_0.png' %></div>
    <div class="slide" data-room-id='22' data-room-type='fl'><%= image_tag 'rooms/room_fl_1.png' %></div>
    <div class="slide" data-room-id='23' data-room-type='fl'><%= image_tag 'rooms/room_fl_2.png' %></div>
    <div class="slide" data-room-id='24' data-room-type='fl'><%= image_tag 'rooms/room_fl_3.png' %></div>
    <div class="slide" data-room-id='25' data-room-type='cross'><%= image_tag 'rooms/room_cross_0.png' %></div>
    <div class="slide" data-room-id='26' data-room-type='pcross'><%= image_tag 'rooms/room_pcross_0.png' %></div>
    <div class="slide" data-room-id='27' data-room-type='pcross'><%= image_tag 'rooms/room_pcross_1.png' %></div>
    <div class="slide" data-room-id='28' data-room-type='pcross'><%= image_tag 'rooms/room_pcross_2.png' %></div>
    <div class="slide" data-room-id='29' data-room-type='pcross'><%= image_tag 'rooms/room_pcross_3.png' %></div>
    <div class="slide" data-room-id='30' data-room-type='o'><%= image_tag 'rooms/room_o_0.png' %></div>
  </div>

  <div class='row'>
    <div class='col-sm-6'>
      <div id='room-preview'>
        <%= image_tag 'rooms/room_rect_0.png' %>
      </div>
    </div>
    <div class='col-sm-6'>
      <div id='dialog-form-errors'></div>
      <form class="form-horizontal" id='dialog-form'>

        <%= render partial: 'shared/imputs' %>

        <div class="form-group">
          <div class="col-sm-offset-3 col-sm-9">
            <button class="btn btn-guideline" id='submit-new-dimensions'>Submit</button>
          </div>
        </div>
      </form>
    </div>
  </div>


</div>

<script>
</script>
